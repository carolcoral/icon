version: '3.8'

services:
  icon-manager:
    build: .
    ports:
      - "5173:5173"  # 前端开发服务器端口
      - "3000:3000"  # 后端API端口
    volumes:
      # 图片文件夹映射到宿主机，支持实时同步
      - ./public/assets/images:/app/public/assets/images
      # 可选：如果需要实时代码更新，可以映射源代码目录
      # - ./client/src:/app/client/src
      # - ./node-functions:/app/node-functions
    environment:
      - NODE_ENV=development
      - VITE_API_BASE_URL=http://localhost:3000
      - PORT=3000
    restart: unless-stopped
    networks:
      - icon-network

networks:
  icon-network:
    driver: bridge

volumes:
  # 持久化图片数据
  images_data:
    driver: local